{% extends "./layout/layout.html" %}
{% block content %}
<!-- Nav tabs -->
<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" id="task-tab" data-toggle="tab" href="#task" role="tab" aria-controls="task"
      aria-selected="true">task</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="sumary-tab" data-toggle="tab" href="#sumary" role="tab" aria-controls="sumary"
      aria-selected="false">sumary</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="messages-tab" data-toggle="tab" href="#messages" role="tab" aria-controls="messages"
      aria-selected="false">Messages</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="settings-tab" data-toggle="tab" href="#settings" role="tab" aria-controls="settings"
      aria-selected="false">Settings</a>
  </li>
</ul>

<!-- Tab panes -->
<div class="tab-content">
  <div class="tab-pane active" id="task" role="tabpanel" aria-labelledby="task-tab">
    <div class="card">
      <div class="card-header text-white text-right">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalNewTask">
          <i class="material-icons">add</i> Nova Tarefa
        </button>
      </div>
      <div class="card-body">
        <div class="row mt-4">
          {% for task in tasks %}
          <div class="col-md-4 col-sm-4">
            <a href="/task/{{ task.id }}">
              <div class="card card-stats">
                <div class="card-header card-header-success card-header-icon">
                  <div class="card-icon">
                    <i class="material-icons">task</i>
                  </div>
                  <p class="card-category">{{task.task_type.name}}</p>
                  <h4 class="card-title">NÂº 765</h4>
                  <h4 class="card-title">Cliente: Braspag</h4>
                </div>
                <div class="card-footer">
                  <div class="stats">
                    <i class="material-icons">date_range</i> {{task.day}}
                  </div>
                </div>
              </div>
            </a>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
  <div class="tab-pane" id="sumary" role="tabpanel" aria-labelledby="sumary-tab">BBBB</div>
  <div class="tab-pane" id="messages" role="tabpanel" aria-labelledby="messages-tab">CCCCC</div>
  <div class="tab-pane" id="settings" role="tabpanel" aria-labelledby="settings-tab">A5555555</div>
</div>

<!-- Modal new Task-->
<div class="modal" id="modalNewTask" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Nova Tarefa</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form action="/tasks/" method="post">
        <div class="modal-body">
          <label for="type">Tipo da Tarefa</label>
          <select id="type" name="type" class="form-control">
            {% for type in task_types %}
            <option value='{{type.id}}' {% if type.selected %} selected {% endif %}>
              {{type.name}}
            </option>
            {% endfor %}
          </select>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">
            <i class="material-icons">save</i>
            Salvar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

{% endblock %}